#Описание

Утилита автоматизирующая процесс разработки проектов
* Имеющих компонентную организацию
* Использующие манифест в формате android repo для описания компонентов и определения релизов
* Использующиее maven сборщик для сборки компонентов
* Использующих git систему контроля версий

##Базовое использование

###Установка 
	
	Распаковать сборку repo-build-X.Y.Z.zip, например в ~/opt
	прописать путь в PATH

Получаем проект, переключаемся на релиз, генерируем центральный pom.xml файл, собираем

	mk myproject
	cd myproject
	repo-build -M https://gitlab/myproject -b release1 init sync build-pom
	mvn clean install 
	
Переключаемся на фичу, генерируем build файл, собираем

	repo-build -f feature1 switch build-pom
	mvn clean install	
	
В одном вызове можно комбинировать набор команд, если задать несколько 
команд, то они будут исполнятся в том порядке в ктором были перечислены
	
	
##Описание возможностей

###общие параметры

    -r <repo projects basedir>
		если не задан то равен текущему каталогу

###build-pom 
Команда для формирования build pom файла по манифесту
    
    -p <build pom file>
		если параметр не задан то считается равным <repo project basedir>/pom.xml

###switch
Команда для переключения проектов на фича ветки
		
	-f <feature branch name>

###prepare-merge
Команда для отведения prepareBuild веток и мержа в них фича веток
	
	-f <feature branch name>

###init
Команда для выгрузки repo projects
получает manifest проект если его нет 
обновляет, если manifest проект уже есть

    -M <manifet git url>
        требуется задавать если нет проекта manifest
	-b <manifest branch>
		параметр задает ветку манифеста которую надо использовать

###sync
Команда для обновления repo projects
получить обновление для проектов по манифесту из центрального репозитория		

###status
Команда для получения git status по каждому компоненту
команда показывает
* неотслеживаемые файлы
* незакоммиченные изменения
* незапушенные коммиты

###grep
Команда для поиска по всем компонентам силами git grep
    
    -e <expression> 
        регулярное выражение для поиска


###merge-abort
Команда для удаления последствий неудачного мержа

###stash 
Команда для сохранения незакоммиченных изменений

###stash-pop 
Команда для восстановления незакоммиченных изменений

###git-feature-merge-release
Команда используется для объединения изменений из релизных веток в фича ветки
Применяется к компонентам кторые имеют фича ветки
Перед применением команды необходимо выполнить команды sync switch

###maven-feature-update-parent
Команда используется для обновления версии центрального parent компонента для компонентов имеющих фичабранчи
Версия parent обновляется только при условии что компонент наследуется от центрального parent
изменения коммитятся в фича бранчи с комментарием vup parent to <version>
Параметры

    -f фичабранч
    -P parent

Перед пременение команды необходимо выполнить команды sync switch 

###maven-feature-update-versions
Команда используется для обновления свойств задающих версии для зависимостей, для компонентов имеющих фичабранчи
Перед обновлением версий, строится ациклический граф зависимостей компонентов без учета версий
затем этот граф топологически сортируется по зависимостям
затем для отсортированных компонентов последовательно выполняются команды

    mvn versions:update-versions -Dincludes=$includes
    mvn clean install -DskipTests

затем, если pom.xml изменен

    git add pom.xml
    git commit -m 'update dependencies to last feature snapshot'

таким образом в локальном репозитории будут собраны корректные артефакты, кторые будут 
учитываться version plugin
	